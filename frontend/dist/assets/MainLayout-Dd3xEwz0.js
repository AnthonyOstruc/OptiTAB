import{_ as C,d as X,u as Z,C as ee,o as oe,M as ne}from"./index-BhTphZWV.js";import{e as m,f as M,o as t,z as E,d as n,y as te,M as se,a as N,c as I,C as ae,A as V,b as i,g as w,F as y,p as x,K as $,t as b,n as L,u as S,w as re,E as ie,h as g,P as le,j as O,i as ce}from"./vendor-CPU10QdV.js";import{m as z,r as de}from"./menuItems-sTa2MZDg.js";import{a as ue}from"./matieres-BKndaZDR.js";const pe="/assets/Logo_bg-TFda7SWB.png",_e={name:"Logo"};function ve(h,a,l,r,u,c){const p=m("router-link");return t(),M(p,{to:"/"},{default:E(()=>a[0]||(a[0]=[n("img",{src:pe,alt:"Logo OptiTAB",class:"logo"},null,-1)])),_:1,__:[0]})}const P=C(_e,[["render",ve],["__scopeId","data-v-4bcc3c74"]]),fe={class:"navigation"},ge={class:"nav-items"},he=["onClick"],me={class:"nav-text"},be={key:0,class:"matieres-tabs"},ke={class:"tabs-container"},ye=["onClick","onMousedown"],Me={class:"tab-name"},Ce=["onClick"],xe={key:0,class:"matieres-dropdown"},Ie=["onClick"],we=["innerHTML"],$e={class:"dropdown-name"},Le={class:"right-items"},Ne={class:"right-text"},F="matieres_disponibles_cache",Se=600*1e3,Ee={__name:"Navigation",emits:["open-login"],setup(h,{emit:a}){const l=a,r=te(),u=se(),c=X(),p=Z(),_=N([]),f=N(!1),k=N(!1),s=I(()=>z.filter(e=>["cours","calculator","exercices","quiz","fiches"].includes(e.key))),D=I(()=>z.filter(e=>["contact","login"].includes(e.key))),Q=I(()=>_.value.filter(e=>e&&e.id&&c.selectedMatieresIds.includes(e.id))),B=I(()=>_.value.filter(e=>e&&e.id&&!c.selectedMatieresIds.includes(e.id))),R=I(()=>["Quiz","Exercises","Sheets","Notions","QuizNotions","QuizChapitres","Chapitres","ChapterExercises","ChapterQuiz"].includes(u.name)),H=async e=>{try{if(e.emit){l(e.emit);return}if(e.external&&e.href){window.open(e.href,"_blank","noopener,noreferrer");return}if(["exercices","fiches","quiz"].includes(e.key))return;e.href&&!e.external&&await r.push(e.href)}catch{e.href&&!e.external&&await r.push(e.href)}},W=()=>{try{const e=localStorage.getItem(F);if(!e)return null;const d=JSON.parse(e);return!d||!Array.isArray(d.data)?null:d}catch{return null}},G=e=>{try{const d={niveauId:p.niveau_pays?.id||null,ts:Date.now(),data:e};localStorage.setItem(F,JSON.stringify(d))}catch{}},q=async({useCache:e=!0}={})=>{if(!p.niveau_pays?.id){_.value=[];return}if(e){const d=W(),o=d?.niveauId===(p.niveau_pays?.id||null),v=d&&Date.now()-d.ts<Se;if(d&&o&&v){_.value=d.data.filter(A=>A&&A.id&&A.nom);return}}try{k.value=!0;const o=(await ue()).data.matieres_disponibles.filter(v=>v&&v.id&&v.nom);_.value=o,G(o)}catch{_.value=[]}finally{k.value=!1}},U=e=>{c.setActiveMatiere(e)},K=e=>{c.selectedMatieresIds.includes(e.id)||c.addMatiereId(e.id),U(e.id),f.value=!1},j=e=>{c.removeMatiereId(e)},J=(e,d)=>{if(e.button===1){e.preventDefault(),e.stopPropagation(),j(d);return}},Y=()=>{f.value=!f.value};return ae(()=>p.niveau_pays,async e=>{if(e){await q();const d=_.value.map(o=>o.id);c.selectedMatieresIds=c.selectedMatieresIds.filter(o=>d.includes(o))}},{immediate:!1}),V(async()=>{await Promise.all([q({useCache:!0}),c.initialize()])}),(e,d)=>(t(),i("nav",fe,[n("div",ge,[(t(!0),i(y,null,x(s.value,o=>(t(),i("div",{key:o.key,class:"nav-item cursor-pointer",onClick:v=>H(o)},[(t(),M($(o.icon),{class:"nav-icon"})),n("span",me,b(o.text),1)],8,he))),128))]),R.value?(t(),i("div",be,[n("div",ke,[(t(!0),i(y,null,x(Q.value,o=>(t(),i("div",{key:`tab-${o.id}`,class:L(["matiere-tab",{active:S(c).activeMatiereId===o.id}]),onClick:v=>U(o.id),onMousedown:v=>J(v,o.id)},[n("span",Me,b(o.nom),1),n("button",{class:"tab-close",onClick:re(v=>j(o.id),["stop"])}," √ó ",8,Ce)],42,ye))),128)),B.value.length>0?(t(),i("button",{key:0,class:"matiere-tab new-tab",onClick:Y},d[0]||(d[0]=[n("span",{class:"tab-icon"},"+",-1)]))):w("",!0)]),f.value?(t(),i("div",xe,[(t(!0),i(y,null,x(B.value,o=>(t(),i("div",{key:`dropdown-${o.id}`,class:"dropdown-item",onClick:v=>K(o)},[n("span",{class:"dropdown-icon",innerHTML:o.svg_icon||"üìö"},null,8,we),n("span",$e,b(o.nom),1)],8,Ie))),128))])):w("",!0)])):w("",!0),n("div",Le,[(t(!0),i(y,null,x(D.value,o=>(t(),M($(o.external?"a":"div"),{key:o.key,href:o.external?o.href:void 0,target:o.external?"_blank":void 0,rel:o.external?"noopener noreferrer":void 0,class:L(["right-item","cursor-pointer",o.key==="login"?"btn-login":""]),onClick:v=>H(o)},{default:E(()=>[(t(),M($(o.icon),{class:"right-icon"})),n("span",Ne,b(o.text),1)]),_:2},1032,["href","target","rel","class","onClick"]))),128))])]))}},Ae=C(Ee,[["__scopeId","data-v-22508482"]]),Oe={name:"HamburgerIcon",props:{isActive:{type:Boolean,default:!1}}};function Te(h,a,l,r,u,c){return t(),i("svg",{class:L(["hamburger-icon",{"is-active":l.isActive}]),width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},a[0]||(a[0]=[n("line",{class:"hamburger-line top-line",x1:"3",y1:"6",x2:"21",y2:"6"},null,-1),n("line",{class:"hamburger-line middle-line",x1:"3",y1:"12",x2:"21",y2:"12"},null,-1),n("line",{class:"hamburger-line bottom-line",x1:"3",y1:"18",x2:"21",y2:"18"},null,-1)]),2)}const ze=C(Oe,[["render",Te],["__scopeId","data-v-f8f6bbbe"]]),De={name:"MobileMenu",components:{Logo:P,UserIcon:de,HamburgerIcon:ze,CloseIcon:ee},emits:["open-login"],setup(h,{emit:a}){const l=N(!1),r=z.filter(s=>s.key!=="login"),u=()=>{l.value=!l.value,p()},c=()=>{l.value=!1,p()},p=()=>{document.body.style.overflow=l.value?"hidden":"auto"},_=s=>{s.emit&&a(s.emit),c()},f=()=>{a("open-login"),c()},k=s=>{s.key==="Escape"&&l.value&&c()};return V(()=>{document.addEventListener("keydown",k)}),ie(()=>{document.removeEventListener("keydown",k)}),{isOpen:l,navigationItems:r,toggleMenu:u,closeMenu:c,handleNavigationClick:_,handleLoginClick:f}}},Be={class:"mobile-menu"},He={class:"panel-header"},qe={class:"navigation-list"},Ue={class:"item-text"},je={class:"panel-footer"};function Fe(h,a,l,r,u,c){const p=m("HamburgerIcon"),_=m("Logo"),f=m("CloseIcon"),k=m("UserIcon");return t(),i("div",Be,[n("button",{class:"hamburger-button",onClick:a[0]||(a[0]=(...s)=>r.toggleMenu&&r.toggleMenu(...s)),"aria-label":"Toggle mobile menu"},[g(p,{"is-active":r.isOpen},null,8,["is-active"])]),n("div",{class:L(["mobile-overlay",{"is-open":r.isOpen}]),onClick:a[1]||(a[1]=(...s)=>r.closeMenu&&r.closeMenu(...s))},null,2),n("div",{class:L(["mobile-panel",{"is-open":r.isOpen}])},[n("div",He,[g(_),n("button",{class:"close-button",onClick:a[2]||(a[2]=(...s)=>r.closeMenu&&r.closeMenu(...s)),"aria-label":"Close menu"},[g(f)])]),n("nav",qe,[(t(!0),i(y,null,x(r.navigationItems,s=>(t(),M($(s.external?"a":"router-link"),{key:s.key,href:s.external?s.href:void 0,to:s.external?void 0:s.href,target:s.external?"_blank":void 0,rel:s.external?"noopener noreferrer":void 0,class:"navigation-item",onClick:D=>r.handleNavigationClick(s)},{default:E(()=>[(t(),M($(s.icon),{class:"item-icon"})),n("span",Ue,b(s.text),1)]),_:2},1032,["href","to","target","rel","onClick"]))),128))]),n("div",je,[n("button",{class:"login-button",onClick:a[3]||(a[3]=(...s)=>r.handleLoginClick&&r.handleLoginClick(...s))},[g(k,{class:"login-icon"}),a[4]||(a[4]=n("span",null,"Connexion",-1))])])],2)])}const Ve=C(De,[["render",Fe],["__scopeId","data-v-42940dcd"]]),Pe={name:"Header",components:{Logo:P,Navigation:Ae,MobileMenu:Ve},setup(){const{openModal:h}=oe();return{handleLogin:()=>{h(ne.LOGIN)}}}},Qe={class:"header"},Re={class:"header-desktop"},We={class:"header-mobile"};function Ge(h,a,l,r,u,c){const p=m("Logo"),_=m("Navigation"),f=m("MobileMenu");return t(),i("header",Qe,[n("div",Re,[g(p),g(_,{onOpenLogin:r.handleLogin},null,8,["onOpenLogin"])]),n("div",We,[g(p),g(f,{onOpenLogin:r.handleLogin},null,8,["onOpenLogin"])])])}const Ke=C(Pe,[["render",Ge],["__scopeId","data-v-e00b0b78"]]),Je="/icons/envelope.svg",Ye="/icons/whatsapp.svg",T=[{label:"CGV",href:"/cgv"},{label:"CGU",href:"/cgu"},{label:"Politique de confidentialit√©",href:"/confidentialite"},{label:"Conditions d'utilisation",href:"/conditions"},{label:"√Ä propos",href:"/about"}],Xe={class:"footer"},Ze={class:"footer-legal-copyright"},eo={class:"footer-legal-copyright-text"},oo={key:0,class:"footer-legal-sep"},no=["href"],to={key:2,class:"footer-legal-sep"},so={__name:"Footer",setup(h){return(a,l)=>{const r=m("router-link");return t(),i("footer",Xe,[l[2]||(l[2]=le('<div class="footer-support" data-v-d8c57f0c><h2 data-v-d8c57f0c>Conseillers disponibles 7j/7 ‚Äì Contactez-nous facilement</h2><p data-v-d8c57f0c> Notre √©quipe p√©dagogique est √† votre √©coute tous les jours, par WhatsApp ou e-mail.<br data-v-d8c57f0c> Posez vos questions, demandez conseil et trouvez la formule qui vous convient : nous sommes l√† pour vous accompagner √† chaque √©tape </p><div class="footer-contacts" data-v-d8c57f0c><a href="mailto:support@optitab.com" class="footer-contact" data-v-d8c57f0c><img src="'+Je+'" alt="Email" data-v-d8c57f0c> support@optitab.com </a><a href="https://wa.me/33764040251" target="_blank" rel="noopener" class="footer-contact" data-v-d8c57f0c><img src="'+Ye+'" alt="WhatsApp" data-v-d8c57f0c> 07 64 04 02 51 </a></div></div><div class="footer-legal-separator" data-v-d8c57f0c></div>',2)),n("div",Ze,[n("span",eo,[O("¬© "+b(new Date().getFullYear())+" ",1),l[0]||(l[0]=n("strong",{class:"footer-copyright-bold"},"OptiTAB",-1)),l[1]||(l[1]=O(". Tous droits r√©serv√©s."))]),S(T).length?(t(),i("span",oo,"|")):w("",!0),(t(!0),i(y,null,x(S(T),(u,c)=>(t(),i(y,{key:u.label},[u.href.startsWith("/")?(t(),M(r,{key:0,to:u.href,class:"footer-legal-link"},{default:E(()=>[O(b(u.label),1)]),_:2},1032,["to"])):(t(),i("a",{key:1,href:u.href,class:"footer-legal-link",target:"_blank",rel:"noopener"},b(u.label),9,no)),c<S(T).length-1?(t(),i("span",to,"|")):w("",!0)],64))),128))])])}}},ao=C(so,[["__scopeId","data-v-d8c57f0c"]]),ro={class:"main-layout"},io={class:"main-content"},lo={__name:"MainLayout",setup(h){return(a,l)=>(t(),i("div",ro,[g(Ke),n("main",io,[ce(a.$slots,"default",{},void 0,!0)]),g(ao)]))}},vo=C(lo,[["__scopeId","data-v-c92406af"]]);export{vo as M};
