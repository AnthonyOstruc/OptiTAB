import{b as l}from"./index-BhTphZWV.js";const h=(e=null,t=null,s=null)=>{let o="/api/cours/cours/";const r=[];return e&&r.push(`matiere=${e}`),t&&r.push(`notion=${t}`),s&&r.push(`chapitre=${s}`),r.length>0&&(o+="?"+r.join("&")),l.get(o)},d=e=>l.post("/api/cours/cours/",e),$=(e,t)=>l.patch(`/api/cours/cours/${e}/`,t),w=e=>l.delete(`/api/cours/cours/${e}/`),y=e=>{const t=new FormData;return t.append("cours",e.cours),t.append("image",e.image),t.append("image_type",e.image_type),e.position&&t.append("position",e.position),e.legende&&t.append("legende",e.legende),l.post("/api/cours/cours-images/",t,{headers:{"Content-Type":"multipart/form-data"}})};function m(e){return e?e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;(?!nbsp;)/g,"&").replace(/\\/g,"\\").replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>").replace(/\*([^*]+)\*/g,"<em>$1</em>"):""}function u(e){if(!e)return"";let t=e;t=t.replace(/^#### (.*$)/gm,'<h4 style="margin-top: 1.5em; margin-bottom: 0.8em; color: #193e8e; font-weight: 600;">$1</h4>'),t=t.replace(/^### (.*$)/gm,'<h3 style="margin-top: 2em; margin-bottom: 1em; color: #193e8e; font-weight: 600;">$1</h3>'),t=t.replace(/^## (.*$)/gm,'<h2 style="margin-top: 2.5em; margin-bottom: 1.2em; color: #193e8e; font-weight: 600; font-size: 1.5em;">$1</h2>'),t=t.replace(/^# (.*$)/gm,'<h1 style="margin-top: 3em; margin-bottom: 1.5em; color: #193e8e; font-weight: 700; font-size: 1.8em;">$1</h1>');const s=t.split(`
`);let o=[],r=!1;for(let i=0;i<s.length;i++){const n=s[i],p=n.trim();if(p.startsWith("- "))r||(o.push('<ul style="margin: 1em 0; padding-left: 0;">'),r=!0),o.push(`<li style="margin-bottom: 0.5em;">${p.substring(2)}</li>`);else if(r&&(o.push("</ul>"),r=!1),p){let c=n.replace(/^ +/g,a=>"&nbsp;".repeat(a.length)).replace(/ +$/g,a=>"&nbsp;".repeat(a.length)).replace(/  +/g,a=>"&nbsp;".repeat(a.length));o.push(`<p style="margin-bottom: 1em; line-height: 1.6;">${c}</p>`)}else n===""&&o.push('<p style="margin-bottom: 1em; line-height: 1.6;">&nbsp;</p>')}return r&&o.push("</ul>"),t=o.join(`
`),t=t.replace(/\*\*([^*]+)\*\*/g,'<strong style="color: #193e8e;">$1</strong>'),t=t.replace(/\*([^*]+)\*/g,'<em style="color: #666;">$1</em>'),t}function b(e,t=[]){if(!e)return"";let s=u(e);if(s=m(s),!t||t.length===0)return s;const o={};return t.forEach(r=>{r.position&&(o[r.position]=r)}),s=s.replace(/\[IMAGE_(\d+)\]/g,(r,i)=>{const n=o[parseInt(i)];return n?`
        <div class="content-image-container" data-image-position="${i}" style="text-align: center; margin: 2em 0;">
          <img 
            src="${g(n.image)}" 
            alt="Image ${n.image_type||"illustration"} - position ${i}"
            class="content-image"
            style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);"
          />
          ${n.legende?`<div class="image-legende" style="text-align: center; margin-top: 8px; font-style: italic; color: #666; font-size: 0.9em;">${n.legende}</div>`:""}
        </div>
      `:r}),s}function g(e,t="cours"){return e&&(e.startsWith("blob:")||e.startsWith("data:"))?e:e&&e.startsWith("/media/")?`http://localhost:8000${e}`:e&&e.includes("/")?`http://localhost:8000/media/${e}`:e&&!e.startsWith("/")?`http://localhost:8000/media/${t==="cours"?"cours_images":"exercice_images"}/${e}`:e}function x(){window.MathJax&&window.MathJax.typesetPromise?window.MathJax.typesetPromise():setTimeout(()=>{window.MathJax&&window.MathJax.typesetPromise&&window.MathJax.typesetPromise()},100);let e=0;const t=10,s=()=>{window.MathJax&&window.MathJax.typesetPromise?window.MathJax.typesetPromise():e<t&&(e++,setTimeout(s,200))};setTimeout(s,100)}export{b as a,g as b,d as c,w as d,y as e,h as g,x as r,$ as u};
