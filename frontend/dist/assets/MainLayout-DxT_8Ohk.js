import{_ as C,Z as m,f as M,o as t,w as E,a as n,C as Z,M as X,G as ee,q as oe,h as N,m as I,s as ne,p as V,c as l,b as $,F as y,e as x,g as w,t as b,j as L,u as S,l as te,$ as se,D as ae,i as g,a0 as re,a1 as ie,a2 as le,d as O,r as ce}from"./index-C20tTf3S.js";import{m as z,r as de}from"./menuItems-zei-A9he.js";import{a as ue}from"./matieres-Ce1WeeoH.js";const _e="/assets/Logo_bg-TFda7SWB.png",pe={name:"Logo"};function fe(h,a,c,r,u,d){const _=m("router-link");return t(),M(_,{to:"/"},{default:E(()=>a[0]||(a[0]=[n("img",{src:_e,alt:"Logo OptiTAB",class:"logo"},null,-1)])),_:1,__:[0]})}const G=C(pe,[["render",fe],["__scopeId","data-v-4bcc3c74"]]),ve={class:"navigation"},ge={class:"nav-items"},he=["onClick"],me={class:"nav-text"},be={key:0,class:"matieres-tabs"},ke={class:"tabs-container"},ye=["onClick","onMousedown"],Me={class:"tab-name"},Ce=["onClick"],xe={key:0,class:"matieres-dropdown"},Ie=["onClick"],$e=["innerHTML"],we={class:"dropdown-name"},Le={class:"right-items"},Ne={class:"right-text"},F="matieres_disponibles_cache",Se=600*1e3,Ee={__name:"Navigation",emits:["open-login"],setup(h,{emit:a}){const c=a,r=Z(),u=X(),d=ee(),_=oe(),p=N([]),v=N(!1),k=N(!1),s=I(()=>z.filter(e=>["cours","calculator","exercices","quiz","fiches"].includes(e.key))),D=I(()=>z.filter(e=>["contact","login"].includes(e.key))),P=I(()=>p.value.filter(e=>e&&e.id&&d.selectedMatieresIds.includes(e.id))),B=I(()=>p.value.filter(e=>e&&e.id&&!d.selectedMatieresIds.includes(e.id))),Q=I(()=>["Quiz","Exercises","Sheets","Notions","QuizNotions","QuizChapitres","Chapitres","ChapterExercises","ChapterQuiz"].includes(u.name)),H=async e=>{try{if(e.emit){c(e.emit);return}if(e.external&&e.href){window.open(e.href,"_blank","noopener,noreferrer");return}if(["exercices","fiches","quiz"].includes(e.key)){console.log(`[Navigation] Navigation vers: ${e.key}`);return}e.href&&!e.external&&(console.log(`[Navigation] Navigation normale vers: ${e.href}`),await r.push(e.href))}catch(i){console.error(`[Navigation] Erreur lors de la navigation pour ${e.key}:`,i),e.href&&!e.external&&await r.push(e.href)}},R=()=>{try{const e=localStorage.getItem(F);if(!e)return null;const i=JSON.parse(e);return!i||!Array.isArray(i.data)?null:i}catch{return null}},W=e=>{try{const i={niveauId:_.niveau_pays?.id||null,ts:Date.now(),data:e};localStorage.setItem(F,JSON.stringify(i))}catch{}},q=async({useCache:e=!0}={})=>{if(!_.niveau_pays?.id){p.value=[];return}if(e){const i=R(),o=i?.niveauId===(_.niveau_pays?.id||null),f=i&&Date.now()-i.ts<Se;if(i&&o&&f){p.value=i.data.filter(A=>A&&A.id&&A.nom);return}}try{k.value=!0;const o=(await ue()).data.matieres_disponibles.filter(f=>f&&f.id&&f.nom);p.value=o,W(o),console.log("[Navigation] Mati√®res charg√©es pour utilisateur:",o.length)}catch(i){console.error("[Navigation] Erreur lors du chargement des mati√®res:",i),p.value=[]}finally{k.value=!1}},U=e=>{d.setActiveMatiere(e),console.log("[Navigation] Mati√®re active d√©finie:",e)},J=e=>{d.selectedMatieresIds.includes(e.id)||d.addMatiereId(e.id),U(e.id),v.value=!1},j=e=>{d.removeMatiereId(e)},K=(e,i)=>{if(e.button===1){e.preventDefault(),e.stopPropagation(),j(i);return}},Y=()=>{v.value=!v.value};return ne(()=>_.niveau_pays,async e=>{if(e){console.log("[Navigation] Niveau chang√©, rechargement des mati√®res:",e.nom),await q();const i=p.value.map(o=>o.id);d.selectedMatieresIds=d.selectedMatieresIds.filter(o=>i.includes(o))}},{immediate:!1}),V(async()=>{await Promise.all([q({useCache:!0}),d.initialize()])}),(e,i)=>(t(),l("nav",ve,[n("div",ge,[(t(!0),l(y,null,x(s.value,o=>(t(),l("div",{key:o.key,class:"nav-item cursor-pointer",onClick:f=>H(o)},[(t(),M(w(o.icon),{class:"nav-icon"})),n("span",me,b(o.text),1)],8,he))),128))]),Q.value?(t(),l("div",be,[n("div",ke,[(t(!0),l(y,null,x(P.value,o=>(t(),l("div",{key:`tab-${o.id}`,class:L(["matiere-tab",{active:S(d).activeMatiereId===o.id}]),onClick:f=>U(o.id),onMousedown:f=>K(f,o.id)},[n("span",Me,b(o.nom),1),n("button",{class:"tab-close",onClick:te(f=>j(o.id),["stop"])}," √ó ",8,Ce)],42,ye))),128)),B.value.length>0?(t(),l("button",{key:0,class:"matiere-tab new-tab",onClick:Y},i[0]||(i[0]=[n("span",{class:"tab-icon"},"+",-1)]))):$("",!0)]),v.value?(t(),l("div",xe,[(t(!0),l(y,null,x(B.value,o=>(t(),l("div",{key:`dropdown-${o.id}`,class:"dropdown-item",onClick:f=>J(o)},[n("span",{class:"dropdown-icon",innerHTML:o.svg_icon||"üìö"},null,8,$e),n("span",we,b(o.nom),1)],8,Ie))),128))])):$("",!0)])):$("",!0),n("div",Le,[(t(!0),l(y,null,x(D.value,o=>(t(),M(w(o.external?"a":"div"),{key:o.key,href:o.external?o.href:void 0,target:o.external?"_blank":void 0,rel:o.external?"noopener noreferrer":void 0,class:L(["right-item","cursor-pointer",o.key==="login"?"btn-login":""]),onClick:f=>H(o)},{default:E(()=>[(t(),M(w(o.icon),{class:"right-icon"})),n("span",Ne,b(o.text),1)]),_:2},1032,["href","target","rel","class","onClick"]))),128))])]))}},Ae=C(Ee,[["__scopeId","data-v-22508482"]]),Oe={name:"HamburgerIcon",props:{isActive:{type:Boolean,default:!1}}};function Te(h,a,c,r,u,d){return t(),l("svg",{class:L(["hamburger-icon",{"is-active":c.isActive}]),width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},a[0]||(a[0]=[n("line",{class:"hamburger-line top-line",x1:"3",y1:"6",x2:"21",y2:"6"},null,-1),n("line",{class:"hamburger-line middle-line",x1:"3",y1:"12",x2:"21",y2:"12"},null,-1),n("line",{class:"hamburger-line bottom-line",x1:"3",y1:"18",x2:"21",y2:"18"},null,-1)]),2)}const ze=C(Oe,[["render",Te],["__scopeId","data-v-f8f6bbbe"]]),De={name:"MobileMenu",components:{Logo:G,UserIcon:de,HamburgerIcon:ze,CloseIcon:se},emits:["open-login"],setup(h,{emit:a}){const c=N(!1),r=z.filter(s=>s.key!=="login"),u=()=>{c.value=!c.value,_()},d=()=>{c.value=!1,_()},_=()=>{document.body.style.overflow=c.value?"hidden":"auto"},p=s=>{s.emit&&a(s.emit),d()},v=()=>{a("open-login"),d()},k=s=>{s.key==="Escape"&&c.value&&d()};return V(()=>{document.addEventListener("keydown",k)}),ae(()=>{document.removeEventListener("keydown",k)}),{isOpen:c,navigationItems:r,toggleMenu:u,closeMenu:d,handleNavigationClick:p,handleLoginClick:v}}},Be={class:"mobile-menu"},He={class:"panel-header"},qe={class:"navigation-list"},Ue={class:"item-text"},je={class:"panel-footer"};function Fe(h,a,c,r,u,d){const _=m("HamburgerIcon"),p=m("Logo"),v=m("CloseIcon"),k=m("UserIcon");return t(),l("div",Be,[n("button",{class:"hamburger-button",onClick:a[0]||(a[0]=(...s)=>r.toggleMenu&&r.toggleMenu(...s)),"aria-label":"Toggle mobile menu"},[g(_,{"is-active":r.isOpen},null,8,["is-active"])]),n("div",{class:L(["mobile-overlay",{"is-open":r.isOpen}]),onClick:a[1]||(a[1]=(...s)=>r.closeMenu&&r.closeMenu(...s))},null,2),n("div",{class:L(["mobile-panel",{"is-open":r.isOpen}])},[n("div",He,[g(p),n("button",{class:"close-button",onClick:a[2]||(a[2]=(...s)=>r.closeMenu&&r.closeMenu(...s)),"aria-label":"Close menu"},[g(v)])]),n("nav",qe,[(t(!0),l(y,null,x(r.navigationItems,s=>(t(),M(w(s.external?"a":"router-link"),{key:s.key,href:s.external?s.href:void 0,to:s.external?void 0:s.href,target:s.external?"_blank":void 0,rel:s.external?"noopener noreferrer":void 0,class:"navigation-item",onClick:D=>r.handleNavigationClick(s)},{default:E(()=>[(t(),M(w(s.icon),{class:"item-icon"})),n("span",Ue,b(s.text),1)]),_:2},1032,["href","to","target","rel","onClick"]))),128))]),n("div",je,[n("button",{class:"login-button",onClick:a[3]||(a[3]=(...s)=>r.handleLoginClick&&r.handleLoginClick(...s))},[g(k,{class:"login-icon"}),a[4]||(a[4]=n("span",null,"Connexion",-1))])])],2)])}const Ve=C(De,[["render",Fe],["__scopeId","data-v-42940dcd"]]),Ge={name:"Header",components:{Logo:G,Navigation:Ae,MobileMenu:Ve},setup(){const{openModal:h}=re();return{handleLogin:()=>{h(ie.LOGIN)}}}},Pe={class:"header"},Qe={class:"header-desktop"},Re={class:"header-mobile"};function We(h,a,c,r,u,d){const _=m("Logo"),p=m("Navigation"),v=m("MobileMenu");return t(),l("header",Pe,[n("div",Qe,[g(_),g(p,{onOpenLogin:r.handleLogin},null,8,["onOpenLogin"])]),n("div",Re,[g(_),g(v,{onOpenLogin:r.handleLogin},null,8,["onOpenLogin"])])])}const Je=C(Ge,[["render",We],["__scopeId","data-v-e00b0b78"]]),Ke="/icons/envelope.svg",Ye="/icons/whatsapp.svg",T=[{label:"CGV",href:"/cgv"},{label:"CGU",href:"/cgu"},{label:"Politique de confidentialit√©",href:"/confidentialite"},{label:"Conditions d'utilisation",href:"/conditions"},{label:"√Ä propos",href:"/about"}],Ze={class:"footer"},Xe={class:"footer-legal-copyright"},eo={class:"footer-legal-copyright-text"},oo={key:0,class:"footer-legal-sep"},no=["href"],to={key:2,class:"footer-legal-sep"},so={__name:"Footer",setup(h){return(a,c)=>{const r=m("router-link");return t(),l("footer",Ze,[c[2]||(c[2]=le('<div class="footer-support" data-v-d8c57f0c><h2 data-v-d8c57f0c>Conseillers disponibles 7j/7 ‚Äì Contactez-nous facilement</h2><p data-v-d8c57f0c> Notre √©quipe p√©dagogique est √† votre √©coute tous les jours, par WhatsApp ou e-mail.<br data-v-d8c57f0c> Posez vos questions, demandez conseil et trouvez la formule qui vous convient : nous sommes l√† pour vous accompagner √† chaque √©tape </p><div class="footer-contacts" data-v-d8c57f0c><a href="mailto:support@optitab.com" class="footer-contact" data-v-d8c57f0c><img src="'+Ke+'" alt="Email" data-v-d8c57f0c> support@optitab.com </a><a href="https://wa.me/33764040251" target="_blank" rel="noopener" class="footer-contact" data-v-d8c57f0c><img src="'+Ye+'" alt="WhatsApp" data-v-d8c57f0c> 07 64 04 02 51 </a></div></div><div class="footer-legal-separator" data-v-d8c57f0c></div>',2)),n("div",Xe,[n("span",eo,[O("¬© "+b(new Date().getFullYear())+" ",1),c[0]||(c[0]=n("strong",{class:"footer-copyright-bold"},"OptiTAB",-1)),c[1]||(c[1]=O(". Tous droits r√©serv√©s."))]),S(T).length?(t(),l("span",oo,"|")):$("",!0),(t(!0),l(y,null,x(S(T),(u,d)=>(t(),l(y,{key:u.label},[u.href.startsWith("/")?(t(),M(r,{key:0,to:u.href,class:"footer-legal-link"},{default:E(()=>[O(b(u.label),1)]),_:2},1032,["to"])):(t(),l("a",{key:1,href:u.href,class:"footer-legal-link",target:"_blank",rel:"noopener"},b(u.label),9,no)),d<S(T).length-1?(t(),l("span",to,"|")):$("",!0)],64))),128))])])}}},ao=C(so,[["__scopeId","data-v-d8c57f0c"]]),ro={class:"main-layout"},io={class:"main-content"},lo={__name:"MainLayout",setup(h){return(a,c)=>(t(),l("div",ro,[g(Je),n("main",io,[ce(a.$slots,"default",{},void 0,!0)]),g(ao)]))}},po=C(lo,[["__scopeId","data-v-c92406af"]]);export{po as M};
