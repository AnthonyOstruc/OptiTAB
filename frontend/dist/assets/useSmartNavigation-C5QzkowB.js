const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DEWifptP.js","assets/index-BlHH9nqM.js","assets/vendor-C_Y2k9EH.js","assets/ui-jaH5oyHW.js","assets/pdf-B39ievqC.js","assets/mathlive-B5k0jhbN.js","assets/index-P4rN2wWs.css","assets/curriculum-MPrAE0b_.js","assets/matieres-BMK_pEFL.js","assets/themes-BPguWxGX.js","assets/notions-sKUDQmQg.js","assets/exercices-CCUS4_6m.js","assets/cours-B70EkRt8.js","assets/synthesis-ZtX-MJY5.js","assets/quiz-Cmw20o8e.js","assets/calculator-B1ZA-8Qo.js","assets/matiere-contextes-CKKyGNsA.js"])))=>i.map(i=>d[i]);
import{_ as A}from"./pdf-B39ievqC.js";import{c as l,M as R,B as w,y as T}from"./vendor-C_Y2k9EH.js";import{d as $}from"./index-BlHH9nqM.js";const I={MATIERE_DEPENDENT:["Exercises","Quiz","Sheets","OnlineCourses"],MATIERE_ENHANCED:["Dashboard","Account","Progress"]},z=()=>{const N=T(),n=R(),a=$();typeof a.initialize=="function"&&a.initialize().catch(console.error);const d=l(()=>I.MATIERE_DEPENDENT.includes(n.name)),f=l(()=>I.MATIERE_ENHANCED.includes(n.name)||d.value),m=l(()=>n.params.matiereId||n.query.matiereId||null),p=l(()=>a.activeMatiereId||a.selectedMatieresIds.length>0),s=(e,r)=>{},g=e=>e!=null&&!isNaN(Number(e))&&Number(e)>0,v=async(e,r=null)=>{try{let t=r||a.activeMatiereId;if(t||(t=await a.getOrSetSmartActiveMatiere(a.selectedMatieresIds)),typeof t=="string"&&(t=Number(t)),!g(t)){await S(e);return}a.setActiveMatiere(t);const o=M(e,t);if(!o)return;await N.push(o)}catch(t){throw s(t,"navigateToSectionWithMatiere"),t}},M=(e,r)=>{const o={exercises:i=>({name:"Notions",params:{matiereId:i}}),quiz:i=>({name:"QuizNotions",params:{matiereId:i}}),sheets:i=>({name:"Sheets",query:{matiereId:i}}),onlinecourses:i=>({name:"CourseNotions",params:{matiereId:i}})}[e.toLowerCase()];return o?o(r):null},S=async e=>{try{const t={exercises:"Exercises",quiz:"Quiz",sheets:"Sheets"}[e.toLowerCase()]||"Dashboard";await N.push({name:t})}catch(r){throw s(r,"redirectToMatiereSelection"),r}},E=async e=>{try{const t={exercices:"exercises",quiz:"quiz",fiches:"sheets"}[e];if(!t)return;await v(t)}catch(r){throw s(r,"handleMenuNavigation"),r}},h=()=>{try{const e=m.value;g(e)&&(a.selectedMatieresIds.includes(Number(e))||a.addMatiereId(e),a.setActiveMatiere(e))}catch(e){s(e,"syncMatiereWithRoute")}},y=async()=>{try{if(d.value&&!m.value){let e=await a.getOrSetSmartActiveMatiere(a.selectedMatieresIds);if(!e)try{const t=await(await A(()=>import("./index-DEWifptP.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]))).getMatieres(),o=Array.isArray(t?.data)?t.data:t?.data?.results||[],i=u=>(u||"").toString().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").toLowerCase(),c=o.find(u=>i(u.nom||u.titre).includes("mathem"))||o[0];c?.id&&(e=c.id,a.addMatiereId(c.id),a.setActiveMatiere(c.id))}catch{}if(e){const r=n.name.toLowerCase();return await v(r,e),!0}else return!1}return!1}catch(e){return s(e,"checkAndRedirectIfNeeded"),!1}};return w(()=>n.path,()=>{h()},{immediate:!0}),{currentRouteNeedsMatiere:d,currentRouteCanUseMatiere:f,matiereIdFromRoute:m,hasAvailableMatiere:p,navigateToSectionWithMatiere:v,handleMenuNavigation:E,redirectToMatiereSelection:S,syncMatiereWithRoute:h,checkAndRedirectIfNeeded:y,getRouteForSection:M,isValidMatiereId:g}};export{z as u};
