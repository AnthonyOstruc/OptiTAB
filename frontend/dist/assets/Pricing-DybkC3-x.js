import{D as E}from"./DashboardLayout-BeVgDFuc.js";import{b as l,o,d as s,a as i,c as $,A as D,g,k as L,l as N,F as f,p as b,n as k,t as c,h as C,j,u as A,f as w,w as F,z as U}from"./vendor-C_Y2k9EH.js";import{_ as x,u as I,L as T,b as h}from"./index-BlHH9nqM.js";import"./menuItems-2RBwQC8O.js";import"./matieres-BMK_pEFL.js";import"./ui-jaH5oyHW.js";import"./pdf-B39ievqC.js";import"./mathlive-B5k0jhbN.js";function Y(y,v){return o(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"fill-rule":"evenodd",d:"M19.916 4.626a.75.75 0 0 1 .208 1.04l-9 13.5a.75.75 0 0 1-1.154.114l-6-6a.75.75 0 0 1 1.06-1.06l5.353 5.353 8.493-12.74a.75.75 0 0 1 1.04-.207Z","clip-rule":"evenodd"})])}const Z={class:"pricing-container"},q={class:"billing-toggle"},G={class:"toggle-label"},H={class:"plans-grid"},J={key:0,class:"popular-badge"},K={class:"plan-header"},O={class:"plan-name"},Q={class:"plan-price"},R={class:"price-amount"},W={class:"price-period"},X={key:0,class:"savings"},ee={class:"features-list"},se=["onClick","disabled"],te={key:1},ae={key:2},oe={class:"modal-actions"},le={__name:"PricingPlans",setup(y){const v=I(),p=i([]),_=i(!1),r=i(null),u=i(!1),d=i(null),n=i(null),P=$(()=>p.value.filter(a=>a.billing_period===(_.value?"yearly":"monthly"))),z=async()=>{try{const a=await h.get("/subscriptions/plans/");p.value=a.data.plans}catch{}},S=async()=>{try{const a=await h.get("/subscriptions/status/");a.data.has_subscription&&(n.value=a.data)}catch{}},V=a=>{const t=p.value.find(e=>e.plan_type===a.plan_type&&e.billing_period==="monthly");return t?Math.round(t.price*12-a.price):0},M=a=>{d.value=a,u.value=!0},B=async()=>{if(d.value){r.value=d.value.id,u.value=!1;try{const a=await h.post("/subscriptions/create-checkout-session/",{price_id:d.value.stripe_price_id});window.location.href=a.data.checkout_url}catch{alert("Erreur lors du processus de paiement. Veuillez réessayer.")}finally{r.value=null}}};return D(()=>{z(),v.isAuthenticated&&S()}),(a,t)=>(o(),l("div",Z,[t[7]||(t[7]=s("div",{class:"pricing-header"},[s("h2",{class:"pricing-title"},"Choisissez votre plan"),s("p",{class:"pricing-subtitle"},"Commencez avec 7 jours d'essai gratuit")],-1)),s("div",q,[s("label",G,[L(s("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=e=>_.value=e),class:"toggle-input"},null,512),[[N,_.value]]),t[4]||(t[4]=s("span",{class:"toggle-slider"},null,-1)),t[5]||(t[5]=s("span",{class:"toggle-text"}," Facturation annuelle (2 mois gratuits) ",-1))])]),s("div",H,[(o(!0),l(f,null,b(P.value,e=>(o(),l("div",{key:e.id,class:k(["plan-card",{popular:e.plan_type==="premium",loading:r.value===e.id}])},[e.plan_type==="premium"?(o(),l("div",J," Populaire ")):g("",!0),s("div",K,[s("h3",O,c(e.name),1),s("div",Q,[s("span",R,c(e.price)+"€",1),s("span",W,"/"+c(e.billing_period==="monthly"?"mois":"an"),1)]),_.value&&e.billing_period==="yearly"?(o(),l("div",X," Économisez "+c(V(e))+"€/an ",1)):g("",!0)]),s("ul",ee,[(o(!0),l(f,null,b(e.features,m=>(o(),l("li",{key:m,class:"feature-item"},[C(A(Y),{class:"feature-icon"}),j(" "+c(m),1)]))),128))]),s("button",{onClick:m=>M(e),disabled:r.value===e.id||n.value&&n.value.plan_type===e.plan_type,class:k(["select-plan-btn",{current:n.value&&n.value.plan_type===e.plan_type,loading:r.value===e.id}])},[r.value===e.id?(o(),w(T,{key:0,class:"btn-spinner"})):n.value&&n.value.plan_type===e.plan_type?(o(),l("span",te," Plan actuel ")):(o(),l("span",ae," Commencer l'essai gratuit "))],10,se)],2))),128))]),u.value?(o(),l("div",{key:0,class:"modal-overlay",onClick:t[3]||(t[3]=e=>u.value=!1)},[s("div",{class:"modal-content",onClick:t[2]||(t[2]=F(()=>{},["stop"]))},[t[6]||(t[6]=s("h3",null,"Confirmer votre choix",-1)),s("p",null,"Vous allez commencer un essai gratuit de 7 jours pour le plan "+c(d.value?.name)+".",1),s("div",oe,[s("button",{onClick:t[1]||(t[1]=e=>u.value=!1),class:"btn-cancel"}," Annuler "),s("button",{onClick:B,class:"btn-confirm"}," Continuer ")])])])):g("",!0)]))}},ne=x(le,[["__scopeId","data-v-5e418202"]]),re={class:"pricing-page"},ie={__name:"Pricing",setup(y){return(v,p)=>(o(),w(E,null,{default:U(()=>[s("div",re,[C(ne)])]),_:1}))}},he=x(ie,[["__scopeId","data-v-1e96529f"]]);export{he as default};
