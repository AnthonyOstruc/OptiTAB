import{c,M as p,C as y,y as R}from"./vendor-CPU10QdV.js";import{d as w}from"./index-BhTphZWV.js";const S={MATIERE_DEPENDENT:["Exercises","Quiz","Sheets","OnlineCourses"],MATIERE_ENHANCED:["Dashboard","Account","Progress"]},$=()=>{const g=R(),o=p(),a=w();typeof a.initialize=="function"&&a.initialize().catch(console.error);const u=c(()=>S.MATIERE_DEPENDENT.includes(o.name)),h=c(()=>S.MATIERE_ENHANCED.includes(o.name)||u.value),l=c(()=>o.params.matiereId||o.query.matiereId||null),I=c(()=>a.activeMatiereId||a.selectedMatieresIds.length>0),i=(e,r)=>{},m=e=>e!=null&&!isNaN(Number(e))&&Number(e)>0,d=async(e,r=null)=>{try{let t=r||a.activeMatiereId;if(t||(t=await a.getOrSetSmartActiveMatiere(a.selectedMatieresIds)),typeof t=="string"&&(t=Number(t)),!m(t)){await N(e);return}a.setActiveMatiere(t);const n=v(e,t);if(!n)return;await g.push(n)}catch(t){throw i(t,"navigateToSectionWithMatiere"),t}},v=(e,r)=>{const n={exercises:s=>({name:"Notions",params:{matiereId:s}}),quiz:s=>({name:"QuizNotions",params:{matiereId:s}}),sheets:s=>({name:"Sheets",query:{matiereId:s}})}[e.toLowerCase()];return n?n(r):null},N=async e=>{try{const t={exercises:"Exercises",quiz:"Quiz",sheets:"Sheets"}[e.toLowerCase()]||"Dashboard";await g.push({name:t})}catch(r){throw i(r,"redirectToMatiereSelection"),r}},f=async e=>{try{const t={exercices:"exercises",quiz:"quiz",fiches:"sheets"}[e];if(!t)return;await d(t)}catch(r){throw i(r,"handleMenuNavigation"),r}},M=()=>{try{const e=l.value;m(e)&&(a.selectedMatieresIds.includes(Number(e))||a.addMatiereId(e),a.setActiveMatiere(e))}catch(e){i(e,"syncMatiereWithRoute")}},E=async()=>{try{if(u.value&&!l.value){const e=await a.getOrSetSmartActiveMatiere(a.selectedMatieresIds);if(e){const r=o.name.toLowerCase();return await d(r,e),!0}else return!1}return!1}catch(e){return i(e,"checkAndRedirectIfNeeded"),!1}};return y(()=>o.path,()=>{M()},{immediate:!0}),{currentRouteNeedsMatiere:u,currentRouteCanUseMatiere:h,matiereIdFromRoute:l,hasAvailableMatiere:I,navigateToSectionWithMatiere:d,handleMenuNavigation:f,redirectToMatiereSelection:N,syncMatiereWithRoute:M,checkAndRedirectIfNeeded:E,getRouteForSection:v,isValidMatiereId:m}};export{$ as u};
