import{_ as x,d as Z,u as P,C as ee,p as oe,M as te}from"./index-BKOtkL97.js";import{e as k,f as C,o as s,z as T,d as t,y as ne,M as se,a as E,c as I,B as ae,A as Q,b as i,g as $,F as M,p as w,J as L,t as m,n as N,u as O,w as re,D as ie,h as g,a1 as le,j as z,i as ce}from"./vendor-C_Y2k9EH.js";import{m as H,r as de}from"./menuItems-QcQMPWTp.js";import{a as ue}from"./matieres-DitvPObI.js";const _e="/assets/Logo_bg-TFda7SWB.png",pe={name:"Logo"};function ve(b,a,l,n,_,d){const p=k("router-link");return s(),C(p,{to:"/"},{default:T(()=>a[0]||(a[0]=[t("img",{src:_e,alt:"Logo OptiTAB",class:"logo"},null,-1)])),_:1,__:[0]})}const R=x(pe,[["render",ve],["__scopeId","data-v-ddb43b5f"]]),fe={class:"navigation"},ge={class:"nav-items"},he=["onClick"],me={class:"nav-text"},be={key:0,class:"matieres-tabs"},ke={class:"tabs-container"},ye=["onClick","onMousedown"],Me={class:"tab-name"},Ce=["onClick"],xe={key:0,class:"matieres-dropdown"},Ie=["onClick"],we=["innerHTML"],$e={class:"dropdown-name"},Le={class:"right-items"},Ne={class:"right-text"},V="matieres_disponibles_cache",Se=600*1e3,Ae={__name:"Navigation",emits:["open-login"],setup(b,{emit:a}){const l=a,n=ne(),_=se(),d=Z(),p=P(),u=E([]),f=E(!1),y=E(!1),r=I(()=>H.filter(e=>["calculator","about","cours-particuliers"].includes(e.key))),S=I(()=>H.filter(e=>["contact","login"].includes(e.key))),A=I(()=>u.value.filter(e=>e&&e.id&&d.selectedMatieresIds.includes(e.id))),h=I(()=>u.value.filter(e=>e&&e.id&&!d.selectedMatieresIds.includes(e.id))),W=I(()=>["Quiz","Exercises","Sheets","Notions","QuizNotions","QuizChapitres","Chapitres","ChapterExercises","ChapterQuiz"].includes(_.name)),U=async e=>{try{if(e.emit){l(e.emit);return}if(e.external&&e.href){window.open(e.href,"_blank","noopener,noreferrer");return}e.href&&!e.external&&await n.push(e.href)}catch{e.href&&!e.external&&await n.push(e.href)}},G=()=>{try{const e=localStorage.getItem(V);if(!e)return null;const c=JSON.parse(e);return!c||!Array.isArray(c.data)?null:c}catch{return null}},J=e=>{try{const c={niveauId:p.niveau_pays?.id||null,ts:Date.now(),data:e};localStorage.setItem(V,JSON.stringify(c))}catch{}},j=async({useCache:e=!0}={})=>{if(!p.niveau_pays?.id){u.value=[];return}if(e){const c=G(),o=c?.niveauId===(p.niveau_pays?.id||null),v=c&&Date.now()-c.ts<Se;if(c&&o&&v){u.value=c.data.filter(D=>D&&D.id&&D.nom);return}}try{y.value=!0;const o=(await ue()).data.matieres_disponibles.filter(v=>v&&v.id&&v.nom);u.value=o,J(o)}catch{u.value=[]}finally{y.value=!1}},q=e=>{d.setActiveMatiere(e)},K=e=>{d.selectedMatieresIds.includes(e.id)||d.addMatiereId(e.id),q(e.id),f.value=!1},F=e=>{d.removeMatiereId(e)},Y=(e,c)=>{if(e.button===1){e.preventDefault(),e.stopPropagation(),F(c);return}},X=()=>{f.value=!f.value};return ae(()=>p.niveau_pays,async e=>{if(e){await j();const c=u.value.map(o=>o.id);d.selectedMatieresIds=d.selectedMatieresIds.filter(o=>c.includes(o))}},{immediate:!1}),Q(async()=>{await Promise.all([j({useCache:!0}),d.initialize()])}),(e,c)=>(s(),i("nav",fe,[t("div",ge,[(s(!0),i(M,null,w(r.value,o=>(s(),i("div",{key:o.key,class:"nav-item cursor-pointer",onClick:v=>U(o)},[(s(),C(L(o.icon),{class:"nav-icon"})),t("span",me,m(o.text),1)],8,he))),128))]),W.value?(s(),i("div",be,[t("div",ke,[(s(!0),i(M,null,w(A.value,o=>(s(),i("div",{key:`tab-${o.id}`,class:N(["matiere-tab",{active:O(d).activeMatiereId===o.id}]),onClick:v=>q(o.id),onMousedown:v=>Y(v,o.id)},[t("span",Me,m(o.nom),1),t("button",{class:"tab-close",onClick:re(v=>F(o.id),["stop"])}," √ó ",8,Ce)],42,ye))),128)),h.value.length>0?(s(),i("button",{key:0,class:"matiere-tab new-tab",onClick:X},c[0]||(c[0]=[t("span",{class:"tab-icon"},"+",-1)]))):$("",!0)]),f.value?(s(),i("div",xe,[(s(!0),i(M,null,w(h.value,o=>(s(),i("div",{key:`dropdown-${o.id}`,class:"dropdown-item",onClick:v=>K(o)},[t("span",{class:"dropdown-icon",innerHTML:o.svg_icon||"üìö"},null,8,we),t("span",$e,m(o.nom),1)],8,Ie))),128))])):$("",!0)])):$("",!0),t("div",Le,[(s(!0),i(M,null,w(S.value,o=>(s(),C(L(o.external?"a":"div"),{key:o.key,href:o.external?o.href:void 0,target:o.external?"_blank":void 0,rel:o.external?"noopener noreferrer":void 0,class:N(["right-item","cursor-pointer",o.key==="login"?"btn-login":""]),onClick:v=>U(o)},{default:T(()=>[(s(),C(L(o.icon),{class:"right-icon"})),t("span",Ne,m(o.text),1)]),_:2},1032,["href","target","rel","class","onClick"]))),128))])]))}},Ee=x(Ae,[["__scopeId","data-v-e01017b4"]]),Oe={name:"HamburgerIcon",props:{isActive:{type:Boolean,default:!1}}};function Te(b,a,l,n,_,d){return s(),i("svg",{class:N(["hamburger-icon",{"is-active":l.isActive}]),width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},a[0]||(a[0]=[t("line",{class:"hamburger-line top-line",x1:"3",y1:"6",x2:"21",y2:"6"},null,-1),t("line",{class:"hamburger-line middle-line",x1:"3",y1:"12",x2:"21",y2:"12"},null,-1),t("line",{class:"hamburger-line bottom-line",x1:"3",y1:"18",x2:"21",y2:"18"},null,-1)]),2)}const De=x(Oe,[["render",Te],["__scopeId","data-v-f8f6bbbe"]]),ze={name:"MobileMenu",components:{Logo:R,UserIcon:de,HamburgerIcon:De,CloseIcon:ee},emits:["open-login"],setup(b,{emit:a}){const l=E(!1),n=P(),_=H.filter(h=>h.key!=="login"),d=I(()=>n.isAuthenticated),p=()=>{l.value=!l.value,f()},u=()=>{l.value=!1,f()},f=()=>{document.body.style.overflow=l.value?"hidden":"auto"},y=h=>{h.emit&&a(h.emit),u()},r=()=>{a("open-login"),u()},S=async()=>{try{await n.logout(),u()}catch{}},A=h=>{h.key==="Escape"&&l.value&&u()};return Q(()=>{document.addEventListener("keydown",A)}),ie(()=>{document.removeEventListener("keydown",A)}),{isOpen:l,userStore:n,navigationItems:_,isAuthenticated:d,toggleMenu:p,closeMenu:u,handleNavigationClick:y,handleLoginClick:r,handleLogout:S}}},Be={class:"mobile-menu"},He={class:"panel-header"},Ue={class:"navigation-list"},je={class:"item-text"},qe={class:"panel-footer"},Fe={key:1,class:"user-info"},Ve={class:"user-details"},Pe={class:"user-text"},Qe={class:"user-name"},Re={class:"user-email"};function We(b,a,l,n,_,d){const p=k("HamburgerIcon"),u=k("Logo"),f=k("CloseIcon"),y=k("UserIcon");return s(),i("div",Be,[t("button",{class:"hamburger-button",onClick:a[0]||(a[0]=(...r)=>n.toggleMenu&&n.toggleMenu(...r)),"aria-label":"Toggle mobile menu"},[g(p,{"is-active":n.isOpen},null,8,["is-active"])]),t("div",{class:N(["mobile-overlay",{"is-open":n.isOpen}]),onClick:a[1]||(a[1]=(...r)=>n.closeMenu&&n.closeMenu(...r))},null,2),t("div",{class:N(["mobile-panel",{"is-open":n.isOpen}])},[t("div",He,[g(u),t("button",{class:"close-button",onClick:a[2]||(a[2]=(...r)=>n.closeMenu&&n.closeMenu(...r)),"aria-label":"Close menu"},[g(f)])]),t("nav",Ue,[(s(!0),i(M,null,w(n.navigationItems,r=>(s(),C(L(r.external?"a":"router-link"),{key:r.key,href:r.external?r.href:void 0,to:r.external?void 0:r.href,target:r.external?"_blank":void 0,rel:r.external?"noopener noreferrer":void 0,class:"navigation-item",onClick:S=>n.handleNavigationClick(r)},{default:T(()=>[(s(),C(L(r.icon),{class:"item-icon"})),t("span",je,m(r.text),1)]),_:2},1032,["href","to","target","rel","onClick"]))),128))]),t("div",qe,[n.isAuthenticated?(s(),i("div",Fe,[t("div",Ve,[g(y,{class:"user-avatar"}),t("div",Pe,[t("div",Qe,m(n.userStore.user?.first_name||"Utilisateur"),1),t("div",Re,m(n.userStore.user?.email),1)])]),t("button",{class:"logout-button",onClick:a[4]||(a[4]=(...r)=>n.handleLogout&&n.handleLogout(...r))}," D√©connexion ")])):(s(),i("button",{key:0,class:"login-button",onClick:a[3]||(a[3]=(...r)=>n.handleLoginClick&&n.handleLoginClick(...r))},[g(y,{class:"login-icon"}),a[5]||(a[5]=t("span",null,"Connexion",-1))]))])],2)])}const Ge=x(ze,[["render",We],["__scopeId","data-v-96687c7c"]]),Je={name:"Header",components:{Logo:R,Navigation:Ee,MobileMenu:Ge},setup(){const{openModal:b}=oe();return{handleLogin:()=>{b(te.LOGIN)}}}},Ke={class:"header"},Ye={class:"header-desktop"},Xe={class:"header-mobile"};function Ze(b,a,l,n,_,d){const p=k("Logo"),u=k("Navigation"),f=k("MobileMenu");return s(),i("header",Ke,[t("div",Ye,[g(p),g(u,{onOpenLogin:n.handleLogin},null,8,["onOpenLogin"])]),t("div",Xe,[g(p),g(f,{onOpenLogin:n.handleLogin},null,8,["onOpenLogin"])])])}const eo=x(Je,[["render",Ze],["__scopeId","data-v-e00b0b78"]]),oo="/icons/envelope.svg",to="/icons/whatsapp.svg",B=[{label:"CGV",href:"/cgv"},{label:"CGU",href:"/cgu"},{label:"Politique de confidentialit√©",href:"/confidentialite"},{label:"Conditions d'utilisation",href:"/conditions"},{label:"√Ä propos",href:"/about"}],no={class:"footer"},so={class:"footer-legal-copyright"},ao={class:"footer-legal-copyright-text"},ro={key:0,class:"footer-legal-sep"},io=["href"],lo={key:2,class:"footer-legal-sep"},co={__name:"Footer",setup(b){return(a,l)=>{const n=k("router-link");return s(),i("footer",no,[l[2]||(l[2]=le('<div class="footer-support" data-v-d8c57f0c><h2 data-v-d8c57f0c>Conseillers disponibles 7j/7 ‚Äì Contactez-nous facilement</h2><p data-v-d8c57f0c> Notre √©quipe p√©dagogique est √† votre √©coute tous les jours, par WhatsApp ou e-mail.<br data-v-d8c57f0c> Posez vos questions, demandez conseil et trouvez la formule qui vous convient : nous sommes l√† pour vous accompagner √† chaque √©tape </p><div class="footer-contacts" data-v-d8c57f0c><a href="mailto:support@optitab.com" class="footer-contact" data-v-d8c57f0c><img src="'+oo+'" alt="Email" data-v-d8c57f0c> support@optitab.com </a><a href="https://wa.me/33764040251" target="_blank" rel="noopener" class="footer-contact" data-v-d8c57f0c><img src="'+to+'" alt="WhatsApp" data-v-d8c57f0c> 07 64 04 02 51 </a></div></div><div class="footer-legal-separator" data-v-d8c57f0c></div>',2)),t("div",so,[t("span",ao,[z("¬© "+m(new Date().getFullYear())+" ",1),l[0]||(l[0]=t("strong",{class:"footer-copyright-bold"},"OptiTAB",-1)),l[1]||(l[1]=z(". Tous droits r√©serv√©s."))]),O(B).length?(s(),i("span",ro,"|")):$("",!0),(s(!0),i(M,null,w(O(B),(_,d)=>(s(),i(M,{key:_.label},[_.href.startsWith("/")?(s(),C(n,{key:0,to:_.href,class:"footer-legal-link"},{default:T(()=>[z(m(_.label),1)]),_:2},1032,["to"])):(s(),i("a",{key:1,href:_.href,class:"footer-legal-link",target:"_blank",rel:"noopener"},m(_.label),9,io)),d<O(B).length-1?(s(),i("span",lo,"|")):$("",!0)],64))),128))])])}}},uo=x(co,[["__scopeId","data-v-d8c57f0c"]]),_o={class:"main-layout"},po={class:"main-content"},vo={__name:"MainLayout",setup(b){return(a,l)=>(s(),i("div",_o,[g(eo),t("main",po,[ce(a.$slots,"default",{},void 0,!0)]),g(uo)]))}},bo=x(vo,[["__scopeId","data-v-c92406af"]]);export{bo as M};
